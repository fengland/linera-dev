## 微链

本节介绍了 Linera 协议的主要构建块——微链（microchains）。更详细的内容请参考 [白皮书](https://linera.io/whitepaper)。

### 背景

**微链**是描述共享状态连续变化的区块链。在 Linera 网络中，微链与传统的区块链类似，但具有以下重要特点：

- Linera 网络可以容纳任意数量的微链，所有微链共享相同的验证者和安全级别。创建新的微链只需在现有链上进行一次交易。
- 微链中提出新区块的任务可以由验证者或用户端（或者说是他们的钱包）承担，这取决于链的配置。具体而言，微链可以是单所有者、权限控制或公共链，取决于谁有权提出区块。

### 跨链消息传递

在传统的单一区块链网络中，每个交易可以访问应用程序的整个执行状态。在 Linera 中，应用程序的状态分布在多个微链上，每个微链的状态仅受该微链区块的影响。

跨链消息传递是不同微链异步通信的一种方式。这种方法允许应用程序和数据分布在多条链上，以实现更好的可扩展性。当一个链上的应用程序向另一条链上的自身发送消息时，就创建了一个跨链请求。这些请求使用验证者内部网络中的远程过程调用（RPC）来实现，确保每个请求只执行一次。

消息不会立即修改目标链，而是首先放置在目标链的 **收件箱** 中。当目标链的所有者在未来创建下一个区块时，他们可以在新区块中引用当前收件箱中选择的一些消息。这样做会执行选定的消息，并将它们的影响应用到链的状态中。

下面是一组链之间通过连续区块发送异步消息的示例：

```ignore
                               ┌───┐     ┌───┐     ┌───┐
                       Chain A │   ├────►│   ├────►│   │
                               └───┘     └───┘     └───┘
                                                     ▲
                                           ┌─────────┘
                                           │
                               ┌───┐     ┌─┴─┐     ┌───┐
                       Chain B │   ├────►│   ├────►│   │
                               └───┘     └─┬─┘     └───┘
                                           │         ▲
                                           │         │
                                           ▼         │
                               ┌───┐     ┌───┐     ┌─┴─┐
                       Chain C │   ├────►│   ├────►│   │
                               └───┘     └───┘     └───┘
```

Linera 协议允许接收者丢弃消息，但不能更改两条链之间通信队列中选择消息的顺序。如果选定的消息执行失败，钱包在提出接收者的区块时将自动拒绝它。当前的 Linera 客户端实现总是尽可能从收件箱中选择尽可能多的消息，并且除非它们执行失败，否则不会丢弃消息。

### 链所有权语义

活跃链可以有一个或多个所有者。零所有者的链会永久停用。

在 Linera 中，验证者保证 *安全性*：在每条链的每个高度，至多只有一个唯一的区块。

但 *活性* —— 实际上向链添加区块 —— 取决于所有者。有不同类型的轮次和所有者，针对不同的使用案例进行优化：

- 首先是可选的 *快速* 轮次，其中 *超级所有者* 可以提出区块，并以非常低的延迟得到确认，非常适合没有争议的单所有者链。
- 然后是一些 *多领导者轮次*，其中所有 *普通所有者* 都可以提出区块。即使有偶尔的临时争议，这种方式也能很好地工作：一个所有者使用多个设备，或者多人偶尔使用同一条链。
- 最后是 *单领导者轮次*：这给每个普通链所有者一个时间段，在此期间只有他们可以提出新的区块，而不受其他所有者提议的干扰。这对于有多用户尝试在同一时间提交区块的链非常理想。

多领导者轮次的数量是可配置的：对于活动水平波动较大的链，这允许系统在高争议时动态切换到单领导者模式。经常有多个所有者高活动的链可以将多领导者轮次设置为0。

有关如何打开和关闭链的更多详细信息和示例，请参阅 [链管理](wallets.md#opening-a-chain) 部分。